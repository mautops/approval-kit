<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>核心概念 on Approval Kit 文档</title><link>https://mautops.github.io/approval-kit/concepts/</link><description>Recent content in 核心概念 on Approval Kit 文档</description><generator>Hugo</generator><language>zh-cn</language><lastBuildDate>Wed, 19 Nov 2025 00:00:00 +0000</lastBuildDate><atom:link href="https://mautops.github.io/approval-kit/concepts/index.xml" rel="self" type="application/rss+xml"/><item><title>审批模板</title><link>https://mautops.github.io/approval-kit/concepts/template/</link><pubDate>Wed, 19 Nov 2025 00:00:00 +0000</pubDate><guid>https://mautops.github.io/approval-kit/concepts/template/</guid><description>&lt;h2 id="模板结构"&gt;模板结构&lt;/h2&gt;
&lt;p&gt;审批模板定义了完整的审批流程结构,包括:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;基本信息&lt;/strong&gt;: ID、名称、描述、版本号&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;节点定义&lt;/strong&gt;: 开始节点、审批节点、条件节点、结束节点&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;连接关系&lt;/strong&gt;: 节点间的有向图连接&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;全局配置&lt;/strong&gt;: Webhook 配置、超时配置等&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="节点类型"&gt;节点类型&lt;/h2&gt;
&lt;h3 id="开始节点"&gt;开始节点&lt;/h3&gt;
&lt;p&gt;流程的起点,每个模板必须且只能有一个开始节点.&lt;/p&gt;
&lt;h3 id="审批节点"&gt;审批节点&lt;/h3&gt;
&lt;p&gt;执行审批操作,支持多种审批模式:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;单人审批&lt;/li&gt;
&lt;li&gt;多人会签&lt;/li&gt;
&lt;li&gt;多人或签&lt;/li&gt;
&lt;li&gt;比例会签&lt;/li&gt;
&lt;li&gt;顺序审批&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="条件节点"&gt;条件节点&lt;/h3&gt;
&lt;p&gt;根据条件决定流程走向,支持多种条件类型.&lt;/p&gt;
&lt;h3 id="结束节点"&gt;结束节点&lt;/h3&gt;
&lt;p&gt;流程的终点,标记审批流程完成.&lt;/p&gt;
&lt;h2 id="版本控制"&gt;版本控制&lt;/h2&gt;
&lt;p&gt;模板支持版本控制,每次更新自动创建新版本.历史任务绑定到创建时的模板版本,确保可追溯.&lt;/p&gt;</description></item><item><title>审批任务</title><link>https://mautops.github.io/approval-kit/concepts/task/</link><pubDate>Wed, 19 Nov 2025 00:00:00 +0000</pubDate><guid>https://mautops.github.io/approval-kit/concepts/task/</guid><description>&lt;h2 id="任务结构"&gt;任务结构&lt;/h2&gt;
&lt;p&gt;审批任务是基于模板创建的实例,包含:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;基本信息&lt;/strong&gt;: ID、模板 ID、业务 ID、参数&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;状态信息&lt;/strong&gt;: 当前状态、当前节点&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;运行时数据&lt;/strong&gt;: 节点输出、审批人列表、审批结果&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;审批记录&lt;/strong&gt;: 所有审批操作的记录&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;状态历史&lt;/strong&gt;: 状态变更的完整历史&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="任务状态"&gt;任务状态&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;pending&lt;/strong&gt;: 待审批&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;submitted&lt;/strong&gt;: 已提交&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;approving&lt;/strong&gt;: 审批中&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;approved&lt;/strong&gt;: 已通过&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;rejected&lt;/strong&gt;: 已拒绝&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;cancelled&lt;/strong&gt;: 已取消&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;timeout&lt;/strong&gt;: 已超时&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="状态流转"&gt;状态流转&lt;/h2&gt;
&lt;p&gt;任务状态通过状态机管理,确保状态转换的合法性和一致性.&lt;/p&gt;
&lt;p&gt;状态转换规则:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;pending&lt;/code&gt; → &lt;code&gt;submitted&lt;/code&gt; → &lt;code&gt;approving&lt;/code&gt; → &lt;code&gt;approved&lt;/code&gt;/&lt;code&gt;rejected&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;任何状态都可以转换为 &lt;code&gt;cancelled&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;终态(&lt;code&gt;approved&lt;/code&gt;、&lt;code&gt;rejected&lt;/code&gt;、&lt;code&gt;cancelled&lt;/code&gt;、&lt;code&gt;timeout&lt;/code&gt;)不能转换到其他状态&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="审批记录"&gt;审批记录&lt;/h2&gt;
&lt;p&gt;每次审批操作都会生成审批记录,包含:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;节点 ID&lt;/li&gt;
&lt;li&gt;审批人&lt;/li&gt;
&lt;li&gt;审批结果(approve/reject/transfer)&lt;/li&gt;
&lt;li&gt;审批意见&lt;/li&gt;
&lt;li&gt;审批时间&lt;/li&gt;
&lt;li&gt;附件信息&lt;/li&gt;
&lt;/ul&gt;</description></item><item><title>状态机</title><link>https://mautops.github.io/approval-kit/concepts/state-machine/</link><pubDate>Wed, 19 Nov 2025 00:00:00 +0000</pubDate><guid>https://mautops.github.io/approval-kit/concepts/state-machine/</guid><description>&lt;h2 id="设计理念"&gt;设计理念&lt;/h2&gt;
&lt;p&gt;Approval Kit 使用有限状态机(FSM)管理任务状态流转,确保:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;状态转换的合法性&lt;/li&gt;
&lt;li&gt;状态转换的一致性&lt;/li&gt;
&lt;li&gt;状态转换的可追溯性&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="状态定义"&gt;状态定义&lt;/h2&gt;
&lt;p&gt;任务状态包括:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;pending&lt;/code&gt;: 待审批&lt;/li&gt;
&lt;li&gt;&lt;code&gt;submitted&lt;/code&gt;: 已提交&lt;/li&gt;
&lt;li&gt;&lt;code&gt;approving&lt;/code&gt;: 审批中&lt;/li&gt;
&lt;li&gt;&lt;code&gt;approved&lt;/code&gt;: 已通过&lt;/li&gt;
&lt;li&gt;&lt;code&gt;rejected&lt;/code&gt;: 已拒绝&lt;/li&gt;
&lt;li&gt;&lt;code&gt;cancelled&lt;/code&gt;: 已取消&lt;/li&gt;
&lt;li&gt;&lt;code&gt;timeout&lt;/code&gt;: 已超时&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="转换规则"&gt;转换规则&lt;/h2&gt;
&lt;p&gt;状态转换必须遵循预定义的规则:&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;pending → submitted → approving → approved/rejected
 ↓
 cancelled
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id="转换执行"&gt;转换执行&lt;/h2&gt;
&lt;p&gt;状态转换通过 &lt;code&gt;StateMachine.Transition&lt;/code&gt; 方法执行:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;验证转换合法性&lt;/li&gt;
&lt;li&gt;创建新任务对象(不可变实现)&lt;/li&gt;
&lt;li&gt;更新状态和时间戳&lt;/li&gt;
&lt;li&gt;记录状态变更历史&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id="并发安全"&gt;并发安全&lt;/h2&gt;
&lt;p&gt;状态转换使用版本号机制确保原子性,防止并发修改冲突.&lt;/p&gt;</description></item></channel></rss>